<%- include('partials/header', { title: 'Manage Articles', active: 'admin-articles' }) %>

<section class="admin-dashboard">
  <div class="admin-overlay"></div>
  <div class="admin-container">
    <h1>Manage Articles</h1>

    <% if (articles && articles.length > 0) { %>
      <div class="dashboard-grid">
        <% articles.forEach(article => { %>
          <div class="card">
            <h3><%= article.title %></h3>
            <p><strong>Author:</strong> <%= article.author %></p>
            <p><strong>Description:</strong> <%= article.description %></p>
            <p><strong>Status:</strong>
              <p><strong>Status:</strong>
                <% if (article.status === 'approved') { %>
                  <span class="approved">✔ Approved</span>
                <% } else if (article.status === 'declined') { %>
                  <span class="declined">❌ Declined</span>
                <% } else { %>
                  <span class="pending">⏳ Pending</span>
                <% } %>
              </p>
            </p>

            <div class="card-actions">
              <a href="/admin/download/<%= article.filename %>" target="_blank" class="btn btn-view">View</a>
              <% if (!article.isApproved) { %>
                <form action="/admin/articles/<%= article._id %>/approve" method="POST" style="display:inline;">
                  <button type="submit" class="btn btn-approve">Approve</button>
                </form>

                <form method="POST" action="/admin/articles/<%= article._id %>/decline" style="display:inline;">
                  <button type="submit" class="btn btn-decline">Decline</button>
                </form>
              <% } %>
            </div>
          </div>
        <% }); %>
      </div>
    <% } else { %>
      <p>No articles found.</p>
    <% } %>

    <div style="text-align:center; margin-top:30px;">
      <a href="/admin" class="btn">⬅ Back to Dashboard</a>
    </div>
  </div>
</section>

<%- include('partials/footer') %>
